<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Weekly Assignment 12</title>

		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.0/reset.min.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.0/reveal.min.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.0/theme/blood.min.css" id="theme">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.0/plugin/highlight/monokai.min.css" id="highlight-theme">

		<!-- Vega links -->
		<script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
		<script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
		<script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h2>Weekly Assignment 12</h2>
					<h3>Megan Matthews</h3>
					<p>INFO 3402</p>
				</section>
				<section>
					<p>This is the basic code necessary in order begin putting Vega visualizations into Reveal.js.</p>
						<pre><code data-trim class="js" data-line-numbers=3-7|4-6|8-15|><script type="text/template">
							<!DOCTYPE html>
							<html>
							<head>
								<script src="https://cdn.jsdelivr.net/npm/vega@3">< /script>
								<script src="https://cdn.jsdelivr.net/npm/vega-lite@2">< /script>
								<script src="https://cdn.jsdelivr.net/npm/vega-embed@3">< /script>
							</head>
							<body>
								<div id="vis"></div>
								<script type="text/javascript">
									var spec = {};  /* JSON dump of your chart's spec */
									var opt = {"renderer": "canvas", "actions": false};  /* Options for the embedding */
									vegaEmbed("#vis", spec, opt);
								< /script>
							</body>
							</html>
						</script></code></pre>
				</section>

				<section>
					<p>After placing a visual into your Reveal.js presentation, you can then fill the variable specs with your data/specifications as shown below.</p>
						<pre><code data-trim class='js' data-line-numbers=1-7|3>
									< div id="vis"></ div>
									< script type="text/javascript">
										var spec = {};  /* JSON dump of your chart's spec */
										var opt = {"renderer": "canvas", "actions": false};  /* Options for the embedding */
										vegaEmbed("#vis", spec, opt);
									< /script>
						</code></pre>
				</section>

				<section>
					<p>We will be using <a href="https://github.com/vega/vega-datasets/blob/master/data/disasters.csv"> disasters.csv </a> from <a href="https://github.com/vega/vega-datasets">vega-datasets</a> to creat our two visualizations</p>
				</section>

				<section>
					<p>When using Vega datasets, be sure to update the section dedicated to the data URL with the specific URL you are pulling the data from like so:</p>
					<pre><code data-trim class='js' data-line-numbers=2>
							"data": {
						    		"url": "https://vega.github.io/vega-datasets/data/disasters.csv"
						  },
						</code></pre>
					<p>The code for this specific dataset will look like this.</p>
				</section>

				<section>
					<h2>Visualization One:</h2>
					<h2>Bar Chart</h2>
					<p>Explaining how to change colors, fonts, and font size.</p>
				</section>

				<section>
					<p>Here is our first visualization:</p>
					<!--Vega visualization goes here-->
					<div id="vis01-bars"></div>
						
						<script type="text/javascript">
						var spec = {
							"$schema": "https://vega.github.io/schema/vega-lite/v5.json",
							"width": 900,
							"height": 400,
							"config":{
								"font":"Arial"
							},
							"data": {
								"url": "https://vega.github.io/vega-datasets/data/disasters.csv"
							},
							"mark": {
								"type":"bar",
								"color":"purple"
							},
							"encoding": {
								"x": {
									"field": "Year",
									"type": "temporal",
									"title": "Year",
									"axis": {
										"titleFontSize": 20
									}
								},
								"y": {
									"field": "Deaths",
									"type": "quantitative",
									"title": "Number of Deaths",
									"axis": {
										"titleFontSize": 20
									}
								}
							}
						};
						var opt = {"renderer": "canvas", "actions": false};
						vegaEmbed("#vis01-bars", spec, opt);
						</script>
				</section>

				<section>
					<h3>Interpretation of The Data</h3>
					<p>The highest amount of deaths from natural disasters ocurred in 1931. Since then, the number of deaths caused by natural disasters has shown to have continually decreased. Another important factor to note is that this dataset ends after 2017. Due to this, 4 years of data are missing, including over one year of time that has been affected by a global pandemic.</p>
				</section>

				<section>

					<section>
						<h2>How to accomplish the aesthetic changes:</h2>
						<h3> | </h3>
						<h3> | </h3>
						<h3> V </h3>
					</section>

					<section>
						<h2>Changing Mark Colors</h2>
						<p>For this graph, we are able to change the colors of the bars on the graph like so:</p>
							<pre><code data-trim class='js' data-line-numbers=3-6>
							{
									...
									"mark": {
											"type": "bar",
											"color": "purple"
								},
								...
							};
							</code></pre>
					</section>

					<section>
						<h2>Changing Font Sizes</h2>
						<p>We were also able to change the font sizes of the axis titles on the graph by writing the code as such:</p>
						<pre><code data-trim class='js' data-line-numbers=3,6-8>
							{	
								...
								"encoding": {
										"y": {
											"aggregate": "count", 
											"title": "Number of Deaths",
											"axis":{
												"labelColor": "black",
												"labelFontSize": 20
								...
							}	
						</code></pre>
					</section>

					<section>
						<h2>Changing the Type of Font</h2>
						<p>Finally, we were able to change the type of font used on the axis titles through this code:</p>
						<pre><code data-trim class='js' data-line-numbers=5-7>
							{
								...
								"width": "900",
								"height": 600,
								"config": {
										"font":"Arial"
								},
								...
							};
						</code></pre>
					</section>
				</section>	

				<section>
					<h2>Visualization Two:</h2>
					<h3>Horizontal Bar Chart</h3>
					<p>Using Layering</p>
				</section>

				<section>
					<p> Here is our second visualization using the same dataset. </p>
					<!--Vega visualization goes here-->
					<div id="disasters02" style="center"></div>
						
						<script type="text/javascript">
						var spec = {

							"$schema": "https://vega.github.io/schema/vega-lite/v5.json",
							"width": 600,
							"height": 500,
							"data": {
							    "url": "https://vega.github.io/vega-datasets/data/disasters.csv"
							},
							"encoding": {
							    "x": {
							        "aggregate": "sum",
							        "field": "Deaths",
							        "title": "Number of Deaths",
							        "type": "quantitative",
							        "scale": {"type": "log"},
							        "axis": {"tickCount": 5}
							    },
							    "y": {
							        "field": "Entity",
							        "type": "nominal",
							        "sort": "-x"
							    },
							    "color": {
							        "field": "Entity",
							       "type": "nominal"
							    }
							},
							"layer":[{
							    "mark": "bar"
							},{
							    "mark": {
							        "type": "text",
							        "align": "left",
							        "baseline": "middle",
							        "dx": 5
							    },
							    "encoding": {
							        "text": {
							            "aggregate": "sum",
							            "field": "Deaths",
							            "type": "quantitative",
							            "format": ",.0f"
							        }
							    }
							}]
						};
						var opt = {"renderer": "canvas", "actions": false};
						vegaEmbed("#disasters02", spec, opt);
						</script>
				</section>

				<section>
					<h3>Interpretation of the Data:</h3>
					<p>Disregarding the accumulative "All Natural Disasters" bar, it appears that droughts, epidemics, and floods contribute to the most deaths related to natural disasters. Globally, this makes sense when thinking about the different regions and the different conditions others are living through. If this dataset were to include up to date data, it could be a solid theory that the epidemic bar might grow and even surpass drought due to the recent rise of the COVID-19 virus.</p>
				</section>

				<section>
					<section>
						<h2>Adding Layers</h2>
						<p>To begin, you need to define your X and Y encoding channels.</p>
						<pre><code data-trim class='js' data-line-numbers=1-10|2-6|7-10>
							"encoding": {
								"x": {
									"field": "Deaths", 
									"title": "Number of Deaths",
									"type": "quantitative"
								},
								"y": {
									"field": "Entity",
									"type": "nominal"
								},
								"color": {
									"field": "Entity",
									"type": "nominal"
								}
							},
							"layer":[{
								"mark": "bar"
							},{
								"mark": {
									"type": "text",
									"align": "right",
									"baseline": "line-top",
									"dx": 700
								},
								"encoding": {
									"text": {
										//"aggregate": "count",
										"field": "Deaths",
										"type": "quantitative"
									}
								}
						</code></pre>
					</section>	
				

					<section>
							<h2>Adding Layers Pt2</h2>
							<p>Once that is accomplished, you can begin adding your layering fields like so:</p>
							<pre><code data-trim class='js' data-line-numbers=16-31>
								"encoding": {
									"x": {
										"field": "Deaths", 
										"title": "Number of Deaths",
										"type": "quantitative"
									},
									"y": {
										"field": "Entity",
										"type": "nominal"
									},
									"color": {
										"field": "Entity",
										"type": "nominal"
									}
								},
								"layer":[{
									"mark": "bar"
								},{
									"mark": {
										"type": "text",
										"align": "right",
										"baseline": "line-top",
										"dx": 700
									},
									"encoding": {
										"text": {
											//"aggregate": "count",
											"field": "Deaths",
											"type": "quantitative"
										}
									}
							</code></pre>	
					</section>

					<section>
							<h2>Adding Layers Pt3</h2>
							<p>You will need to define what type of mark your visualization will have. Afterwards, define the next mark, which would be the specifications for your text annoations.</p>
							<pre><code data-trim class='js' data-line-numbers=16-17|18-24>
								"encoding": {
									"x": {
										"field": "Deaths", 
										"title": "Number of Deaths",
										"type": "quantitative"
									},
									"y": {
										"field": "Entity",
										"type": "nominal"
									},
									"color": {
										"field": "Entity",
										"type": "nominal"
									}
								},
								"layer":[{
									"mark": "bar"
								},{
									"mark": {
										"type": "text",
										"align": "right",
										"baseline": "line-top",
										"dx": 700
									},
									"encoding": {
										"text": {
											//"aggregate": "count",
											"field": "Deaths",
											"type": "quantitative"
										}
									}
							</code></pre>	
					</section>

					<section>
							<h2>Adding Layers Pt4</h2>
							<p>Finally, you will need to use the "encoding" line in order to define where the text(s) show up in the visual.</p>
							<pre><code data-trim class='js' data-line-numbers=25-31>
								"encoding": {
									"x": {
										"field": "Deaths", 
										"title": "Number of Deaths",
										"type": "quantitative"
									},
									"y": {
										"field": "Entity",
										"type": "nominal"
									},
									"color": {
										"field": "Entity",
										"type": "nominal"
									}
								},
								"layer":[{
									"mark": "bar"
								},{
									"mark": {
										"type": "text",
										"align": "right",
										"baseline": "line-top",
										"dx": 700
									},
									"encoding": {
										"text": {
											//"aggregate": "count",
											"field": "Deaths",
											"type": "quantitative"
										}
									}
							</code></pre>	
					</section>
				</section>	
				<section>
					<h3> This concludes the tutorial on Vega visualization customization within Reveal.js. Have a wonderful day!</h3>
				</section>
			</div>
		</div>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.0/reveal.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.0/plugin/highlight/highlight.min.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,
				slideNumber: 'c/t',
				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealHighlight ]
			});
		</script>
	</body>
</html>